<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Total Wealth & Purchasing Power Calculator</title>
  <meta name="description" content="A powerful wealth calculator for Indian investors combining SIP, step-up SIP, lumpsum investment and gold/silver CAGR with inflation adjustment. Calculate future wealth, real value after inflation, and compare scenarios at 12%, 13%, 15% expected returns. Ideal for mutual fund investors and long-term planners.">

  <style>
    /* ===== Reset & responsive basics ===== */
    :root { box-sizing: border-box; }
    *, *::before, *::after { box-sizing: inherit; }
    html, body { margin:0; padding:0; width:100%; min-height:100%; -webkit-text-size-adjust:100%; }
    body {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:#f5f6f8; color:#111; line-height:1.45;
      padding:16px;
    }

    /* ===== Layout container ===== */
    .calculator-wrapper {
      max-width: 920px;
      margin: 0 auto;
      background: #fff;
      border-radius: 10px;
      padding: 18px;
      box-shadow: 0 6px 18px rgba(21,30,44,0.06);
    }

    header { margin-bottom:12px; }
    h1 { margin:0 0 6px; font-size:20px; }
    .brand-line { font-weight:600; color:#374151; margin-bottom:8px; font-size:13px; }

    /* ===== Inputs ===== */
    .inputs { margin-top:8px; }
    label { display:block; font-weight:600; font-size:13px; margin-top:10px; color:#1f2937; }
    input[type="number"] {
      width:100%; padding:12px 10px; margin-top:6px; border-radius:8px; border:1px solid #d1d5db; font-size:15px;
      background:#fff;
    }

    .row { display:flex; gap:10px; }
    .col { flex:1; }

    button.calc-btn {
      width:100%; padding:12px; border-radius:8px; border:0; background:#0b5fff; color:#fff; font-weight:700; font-size:16px;
      margin-top:14px; cursor:pointer;
    }
    button.calc-btn:active{ transform:translateY(1px); }

    /* ===== Results ===== */
    #results { margin-top:16px; }
    .result-box { border-radius:8px; background:#ffffff; padding:14px; border:1px solid #e6eef8; }
    .result-box h2 { margin:0 0 8px; font-size:16px; }
    .mini { font-size:13px; color:#374151; margin:6px 0; }

    .scenario-grid {
      display:grid; grid-template-columns:1fr; gap:12px; margin-top:12px;
    }
    @media (min-width:780px) { .scenario-grid { grid-template-columns: repeat(3,1fr); } }

    .scenario-card { background:#fff; border:1px solid #e6eef8; padding:12px; border-radius:8px; font-size:14px; }
    .scenario-card h3 { margin:0 0 8px; font-size:15px; }

    .gold-block { background:#fffaf0; border-left:4px solid #e6b325; padding:12px; border-radius:8px; margin-top:12px; }
    .highlight { background:#fff8e1; border-left:4px solid #ff9800; padding:12px; border-radius:8px; margin-top:12px; }
    .insight { background:#e8f2ff; border-left:4px solid #2b6cff; padding:12px; border-radius:8px; margin-top:12px; font-size:14px; }

    .disclaimer { margin-top:14px; font-size:12px; color:#4b5563; }

    .hr { height:1px; background:#eef2f7; margin:12px 0; border-radius:2px; }

    .error { color:#b91c1c; margin-top:10px; font-size:14px; }

    /* very small screens tweaks */
    @media (max-width:360px) {
      body { padding:10px; }
      .calculator-wrapper { padding:12px; }
      h1 { font-size:18px; }
      input[type="number"] { padding:10px; font-size:14px; }
      button.calc-btn { padding:10px; font-size:15px; }
    }
  </style>
</head>

<body>
  <div class="calculator-wrapper" id="app">
    <header>
      <h1>üí∞ Total Wealth & Purchasing Power Calculator</h1>
      <div class="brand-line">Nitin Ghai ‚Äî Certified Mutual Fund Advisor (MutualFundVibe)</div>
      <div class="mini">Estimate future value of your lumpsum, SIP (with yearly step-up) and gold/silver ‚Äî and see what it‚Äôs worth in today‚Äôs money.</div>
    </header>

    <section class="inputs" aria-label="Calculator inputs">
      <label for="lumpsum">Lumpsum Invested Today (‚Çπ)</label>
      <input id="lumpsum" type="number" inputmode="numeric" placeholder="e.g. 500000">

      <label for="gold">Gold + Silver Value Today (‚Çπ)</label>
      <input id="gold" type="number" inputmode="numeric" placeholder="e.g. 300000">

      <label for="sip">Monthly SIP (‚Çπ)</label>
      <input id="sip" type="number" inputmode="numeric" placeholder="e.g. 15000">

      <div class="row">
        <div class="col">
          <label for="stepup">Annual SIP Increase (%)</label>
          <input id="stepup" type="number" inputmode="numeric" placeholder="e.g. 10">
        </div>
        <div class="col">
          <label for="years">Time Horizon (Years)</label>
          <input id="years" type="number" inputmode="numeric" placeholder="e.g. 20">
        </div>
      </div>

      <button class="calc-btn" onclick="calculateWealth()" aria-label="Calculate my future wealth">Calculate My Future Wealth</button>
      <div id="error" class="error" role="alert" aria-live="polite"></div>
    </section>

    <section id="results" aria-live="polite"></section>

    <div class="disclaimer" style="margin-top:16px;">
      <strong>Note on assumptions:</strong> Equity returns are illustrative at 12% (Conservative), 13% (Moderate) and 15% (Optimistic).
      Gold & silver are assumed at 8% CAGR (approx long-term ~20-year average). Inflation assumed at 7%/yr for purchasing-power estimates.
      These are assumptions, not guarantees.
    </div>
  </div>

  <script>
    /* ===== Utility & calculation functions ===== */

    // Convert number to Indian short words
    function toIndianShort(num) {
      if (!isFinite(num)) return "-";
      if (Math.abs(num) >= 1e7) return (num / 1e7).toFixed(2) + " crore";
      if (Math.abs(num) >= 1e5) return (num / 1e5).toFixed(2) + " lakh";
      if (Math.abs(num) >= 1e3) return (num / 1e3).toFixed(2) + " thousand";
      return Math.round(num).toString();
    }

    // Future value of lumpsum with annual compounding
    function fvLumpsum(P, annualRate, years) {
      if (!P || years <= 0) return 0;
      return P * Math.pow(1 + annualRate, years);
    }

    // Future value of SIP with annual step-up (SIP increases once each year),
    // monthly contributions and monthly compounding derived from annualRate
    function fvSIP(monthly, stepUpRate, years, annualRate) {
      if (!monthly || years <= 0) return 0;
      const months = years * 12;
      const monthlyRate = Math.pow(1 + annualRate, 1 / 12) - 1;
      let fv = 0;
      let currentSip = monthly;
      for (let m = 1; m <= months; m++) {
        fv = fv * (1 + monthlyRate) + currentSip;
        if (m % 12 === 0) { currentSip *= (1 + stepUpRate); }
      }
      return fv;
    }

    // Format number with Indian grouping for display
    function formatINR(num) {
      if (!isFinite(num)) return "-";
      return "‚Çπ " + Number(num).toLocaleString('en-IN', { maximumFractionDigits: 0 });
    }

    // Constants (configurable)
    const GOLD_RATE = 0.08;     // 8% CAGR for gold/silver (assumption)
    const INFLATION = 0.07;     // 7% annual inflation
    const SCENARIOS = [
      { rate: 0.12, label: "Conservative", tag: "Steady Market" },
      { rate: 0.13, label: "Moderate", tag: "Typical Market" },
      { rate: 0.15, label: "Optimistic", tag: "Strong Market (Best Case)" }
    ];

    /* ===== Main UI logic ===== */
    function calculateWealth() {
      const errorDiv = document.getElementById("error");
      const resultsDiv = document.getElementById("results");
      errorDiv.textContent = "";
      resultsDiv.innerHTML = "";

      // Read inputs
      const L = Number(document.getElementById("lumpsum").value) || 0;
      const G = Number(document.getElementById("gold").value) || 0;
      const S = Number(document.getElementById("sip").value) || 0;
      const stepUpPercent = Number(document.getElementById("stepup").value) || 0;
      const years = Number(document.getElementById("years").value) || 0;

      if (years <= 0) { errorDiv.textContent = "Please enter a valid time horizon (years)."; postHeightToParent(); return; }
      if (L < 0 || G < 0 || S < 0 || stepUpPercent < 0) { errorDiv.textContent = "Please enter non-negative values."; postHeightToParent(); return; }

      const stepUp = stepUpPercent / 100;
      const fvGold = G * Math.pow(1 + GOLD_RATE, years);
      const inflationFactor = Math.pow(1 + INFLATION, years);

      // calculate scenarios
      let moderateEquity = 0;
      let moderateTotal = 0;
      const scenarioResults = SCENARIOS.map(s => {
        const fvL = fvLumpsum(L, s.rate, years);
        const fvS = fvSIP(S, stepUp, years, s.rate);
        const equityTotal = fvL + fvS;
        const totalWealth = equityTotal + fvGold;
        if (s.rate === 0.13) { moderateEquity = equityTotal; moderateTotal = totalWealth; }
        return {
          rate: s.rate,
          label: s.label,
          tag: s.tag,
          fvLumpsum: fvL,
          fvSip: fvS,
          equityTotal: equityTotal,
          totalWealth: totalWealth
        };
      });

      // Build result HTML (clear breakup)
      let html = '';

      html += `<div class="result-box" aria-label="Moderate scenario results">`;
      html += `<h2>üîÆ Your Future Wealth Breakdown (Moderate Scenario ‚Äì 13%)</h2>`;

      // Equity block
      html += `<div style="margin-top:8px;"><h3 style="margin:0 0 6px;">1Ô∏è‚É£ Equity (Lumpsum + SIP) ‚Äî @ 13%</h3>`;
      html += `<div class="mini"><strong>Future Equity Value:</strong> ${formatINR(moderateEquity)}<br>`;
      html += `<strong>Approx:</strong> <strong>${toIndianShort(moderateEquity)}</strong></div></div>`;

      html += `<div class="hr"></div>`;

      // Gold block
      html += `<div style="margin-top:6px;"><h3 style="margin:0 0 6px;">2Ô∏è‚É£ Gold & Silver ‚Äî @ ${Math.round(GOLD_RATE*100)}% CAGR</h3>`;
      html += `<div class="mini"><strong>Future Gold & Silver Value:</strong> ${formatINR(fvGold)}<br>`;
      html += `<strong>Approx:</strong> <strong>${toIndianShort(fvGold)}</strong></div></div>`;

      html += `<div class="hr"></div>`;

      // Total block
      html += `<div style="margin-top:6px;"><h3 style="margin:0 0 6px;">3Ô∏è‚É£ Total Future Wealth (Equity + Gold/Silver)</h3>`;
      html += `<div class="mini"><strong>Total Future Value:</strong> ${formatINR(moderateTotal)}<br>`;
      html += `<strong>Approx:</strong> <strong>${toIndianShort(moderateTotal)}</strong></div>`;
      html += `<div style="margin-top:8px; font-size:13px; color:#374151;">Note: Equity portion uses the selected scenario rate (here 13%), while Gold & Silver use an assumed ${Math.round(GOLD_RATE*100)}% CAGR. The total is the sum of both.</div>`;
      html += `</div>`;

      html += `</div>`; // end result-box

      // Scenario comparison cards
      html += `<h2 style="margin-top:14px;">üìä Scenario Comparison</h2>`;
      html += `<div class="scenario-grid">`;
      scenarioResults.forEach(s => {
        html += `<div class="scenario-card" aria-label="${s.label} scenario">`;
        html += `<h3>${s.label} ‚Äî ${(s.rate*100).toFixed(0)}%</h3>`;
        html += `<div class="mini"><strong>Future Equity (Lumpsum + SIP @ ${(s.rate*100).toFixed(0)}%):</strong><br>${formatINR(s.equityTotal)}<br><strong>Approx:</strong> ${toIndianShort(s.equityTotal)}</div>`;
        html += `<div style="height:8px"></div>`;
        html += `<div class="mini"><strong>Future Gold & Silver (@ ${Math.round(GOLD_RATE*100)}%):</strong><br>${formatINR(fvGold)}<br><strong>Approx:</strong> ${toIndianShort(fvGold)}</div>`;
        html += `<div class="hr"></div>`;
        html += `<div class="mini"><strong>Total Future Wealth:</strong><br>${formatINR(s.totalWealth)}<br><strong>Approx:</strong> ${toIndianShort(s.totalWealth)}</div>`;
        html += `<div style="margin-top:8px;"><em style="color:#475569;">${s.tag}</em></div>`;
        html += `</div>`;
      });
      html += `</div>`;

      // Gold explanation block
      html += `<div class="gold-block" style="margin-top:12px;">`;
      html += `<h3 style="margin:0 0 6px;">ü™ô Why Gold & Silver @ ${Math.round(GOLD_RATE*100)}%?</h3>`;
      html += `<div class="mini">We use <strong>${Math.round(GOLD_RATE*100)}% CAGR</strong> as an illustrative long-term average for gold & silver (approx 20-year historical average trends). Sources include historical commodity price datasets and industry summaries such as the <em>World Gold Council</em>. This is an assumption for projection, not a guaranteed return.</div>`;
      html += `</div>`;

      // Inflation-adjusted block (for moderate scenario total)
      const realValue = moderateTotal / inflationFactor;
      html += `<div class="highlight">`;
      html += `<h3 style="margin:0 0 6px;">‚ö†Ô∏è Inflation-Adjusted Purchasing Power</h3>`;
      html += `<div class="mini">Your total future wealth of <strong>${formatINR(moderateTotal)}</strong> (approx <strong>${toIndianShort(moderateTotal)}</strong>) will feel like <strong>${formatINR(realValue)}</strong> in today's money (approx <strong>${toIndianShort(realValue)}</strong>), assuming <strong>${Math.round(INFLATION*100)}% annual inflation</strong>.</div>`;
      html += `</div>`;

      // Planner insight
      let insightText = "";
      if (moderateTotal >= 2e7) insightText = "You are building meaningful long-term wealth. Staying consistent can help you reach large goals comfortably.";
      else if (moderateTotal >= 5e6) insightText = "You are on the right track. A small increase in SIP or small extension to the horizon can make a notable difference.";
      else insightText = "Consider increasing SIP, adding to lumpsum, or extending horizon to improve future corpus.";

      html += `<div class="insight"><strong>üí° Planner's Insight</strong><div style="margin-top:6px;">${insightText}</div></div>`;

      resultsDiv.innerHTML = html;

      // Notify parent embed about new height (attempt)
      postHeightToParent();
    }

    /* ===== postMessage helper ===== */
    function postHeightToParent() {
      try {
        const height = document.documentElement.scrollHeight || document.body.scrollHeight;
        parent.postMessage({ type: 'embed-size', height: height }, '*');
      } catch (e) { /* ignore cross-origin errors */ }
    }

    // send height on load/resize/async events
    window.addEventListener('load', postHeightToParent);
    window.addEventListener('resize', postHeightToParent);
    setTimeout(postHeightToParent, 600);
    setInterval(postHeightToParent, 2000);
  </script>
</body>
</html>
